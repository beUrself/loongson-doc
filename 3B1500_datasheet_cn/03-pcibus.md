PCI 总线接口特性
================

PCI/PCI-X 接口特性
------------------

PCI/PCI-X 接口特性包括：

  - 兼容 PCI 2.3 和 PCI-X 1.0b（注：电压非标准，为 1.8v）；
  - 接口速度最高支持到 33MHz；
  - 支持 64 位双地址周期寻址(Dual Address Cycle)；
  - 支持 PCIX 模式下 8 个对外 split 读请求；
  - 支持 PCIX 模式下 4 个对内 split 读请求；

仲裁器和设备模式
----------------

龙芯 3B1500 的 PCI/PCI-X 接口可以工作在主桥模式或设备模式。它依赖于初始信号
PCI_CONFIG。当处理器工作在主桥模式时，接口根据 PCI_CONFIG[6:4]的内容初始化总线
设备，这种情况 PCI_IDSEL 直接接地；当处理器工作在设备模式时，PCI 总线的初始值定
义了接口的工作模式。在主桥模式时，PCI_CONFIG[6:4]的值应该根据总线设备的驱动能力
去设置（请参见 PCI-X 1.0b 标准）。

PCI 总线仲裁器
--------------

龙芯 3B1500 上的 PCI/PCI-X 总线仲裁器最多支持 8 个主设备。仲裁采用两级的 Round
Robin 调度算法，每一个请求的级别由软件配置决定。仲裁器能确保在总线切换时插入一
个空周期。当总线上没有请求时，总线可配置为归属于最后发起操作的主设备或任一个指
定的主设备。

当龙芯 3B1500 的 PCI/PCI-X 接口请求/允许信号连接到第 0 号请求/允许信号线，1 到
7 号请求线连至片外（pci_req[6:0]与 pci_gnt[6:0]）。当 PCI_CONFIG[1]设置成 1 时
， PCI/PCI-X 接口请求应通过 pci_req[0]和 pci_gnt[0]连到外部的总线仲裁器上。
