HyperTransport 总线接口描述
===========================

龙芯 3B1500 处理器拥有两个 16 位 HyperTransport 总线接口。每个 16 位总线接口可以
分别配置为两个独立的 8 位 HyperTransport 总线接口单独使用。龙芯 3B1500 中，
HyperTransport 接口硬件支持 IO Cache 一致性。并且，在使用龙芯 3B1500 的多片互联
系统中，HT0 总线硬件支持多处理器核间 Cache 一致性。

HyperTransport 接口特性
-----------------------

HyperTransport 接口特性包括：

  兼容 HyperTransport 1.03；
  接口频率支持 200/400/600/800/1000/1200/1600Mhz；
  接口宽度支持 8/16 位模式；
  输入输出频率宽度分别可设；
  每个 16 位总线可单独配置为两个 8 位总线使用；
  支持 IO Cache 一致性；
  HT0 支持多处理器核间 Cache 一致性；

设备模式
--------

HyperTransport 接口包括以下几个配置引脚：

  - PCI_Config[7]，用于配选择 HT 的参考时钟。1 为单端 100MHz，0 为差分 200MHz；
  - HTx_8x2，用于配置每个 HT 总线的工作模式，为 1 表示对应的 HT 总线配置为两个
    8 位总线分别使用；
  - HTx_x_Mode，用于配置 HT 总线上单端控制信号的 IO 方向。

系统 HT 接口连接
----------------

龙芯 3B1500 中的 HyperTransport 接口可以用于系统中的 IO 连接或多处理器互联，不
同系统中的连接方式如下所示：

龙芯 3B1500 单处理器系统连接。用于 IO 设备连接时，HyperTransport 接口硬件维护
IO Cache 一致性。相比 PCI 接口，减少了软件维护 Cache 一致性协议所产生的开销，一
种常见的连接方式如图 4-1 龙芯 3B1500 单处理器系统 HT 接口连接 所示：

图 4-1 龙芯 3B1500 单处理器系统 HT 接口连接

龙芯 3B1500 多处理器系统连接。用于多处理器间互联时，HT0 接口硬件支持处理器核间
Cache 一致性协议，可以使用 HT0 接口可以构成 2 片龙芯 3B1500 处理器的互联系统。
如果需要继续扩展，则需要使用不支持处理器核间 Cache 一致性的 HT1 接口或采用其它
方式。图 4-2 龙芯 3B1500 多处理器系统 HT 接口连接（二片） 中给出了 2 片互联的方
式：

需要注意的是，使用两片互联系统时，主处理器的 NODE_ID[1:0]需要设置为 00，从处理
器的 NODE_ID[1:0]需要设置为 10。

图 4-2 龙芯 3B1500 多处理器系统 HT 接口连接（二片）

